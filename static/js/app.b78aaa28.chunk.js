(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{179:function(e,t,n){"use strict";n.d(t,"a",(function(){return ae}));var r=n(3),a=n.n(r),i=n(11),o=n.n(i),c=n(4),l=n.n(c),s=(n(194),n(2)),d=n(16),u=n(6),b=n(68),j=n(53),h=n(7),f=n(66),p=n(67),g=n(43),O=n(94),x=n(95),m=n(37),y=n(266),v=n(60),w=n(269),k=n(125),S=n(265),C=n(267),P=n(182),I=n(271),z=n(270),D=n(272),W=n(263),M=n(273),T=n(264),A=n(274),U=n(171),E=n(9),N=n(268),R=n(260),J=n(261),F=n(180);var B=n(178),H=n(181),V=Object(B.a)("https://yzhbekhonsuhaptmxckk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl6aGJla2hvbnN1aGFwdG14Y2trIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDQ0MjgzMzcsImV4cCI6MTk2MDAwNDMzN30.8ZNeKaJZsPvHs9UFYPT4AM2CB4LHyZIHh5pSPuuvXks",{localStorage:H.a,detectSessionInUrl:!1}),q=n(40),L=n(262),Z=n(183),G=n(0);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(){var e,t,n,r,a=Object(m.m)(),i=null==(e=a.params)?void 0:e.id,c=Object(s.useState)({data:{title:null==(t=a.params)?void 0:t.title,posterUrl:null==(n=a.params)?void 0:n.posterUrl},error:null,loading:!0}),b=o()(c,2),h=b[0].data,f=b[1];return Object(s.useEffect)((function(){!function(){var e,t,n;l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return f({error:null,data:null,loading:!0}),r.prev=1,r.next=4,l.a.awrap(V.from("movies").select("\n            id,\n            title,\n            posterUrl,\n            duration,\n            tmdbRating,\n            year,\n            classification,\n            description,\n            trailerUrl,\n            director (\n                name\n            )\n            ").eq("id",i).single());case 4:if(e=r.sent,t=e.data,!(n=e.error)){r.next=10;break}throw console.log(n),new Error("Could not get presentations");case 10:f({data:t,loading:!1,error:n}),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(1),console.log(r.t0),f((function(e){return Y(Y({},e),{},{loading:!1,error:r.t0})}));case 17:case"end":return r.stop()}}),null,null,[[1,13]],Promise)}()}),[]),Object(G.jsxs)(q.a,{automaticallyAdjustContentInsets:!0,children:[Object(G.jsx)(j.a,{barStyle:"light-content"}),Object(G.jsxs)(L.a,{edges:["bottom","left","right"],children:[Object(G.jsxs)(p.a,{style:{width:"100%",height:250,position:"relative"},source:{uri:null==h?void 0:h.posterUrl,cache:"force-cache"},children:[Object(G.jsx)(u.a,{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.3)",paddingTop:50}}),Object(G.jsx)(d.a,{style:{position:"absolute",bottom:0,left:0,color:"white",fontSize:35,fontWeight:"600",padding:10},children:null==h?void 0:h.title})]}),Object(G.jsxs)(u.a,{style:{padding:10},children:[Object(G.jsxs)(d.a,{style:{color:"black"},children:[Object(G.jsx)(d.a,{style:{fontWeight:"800"},children:"Direcci\xf3n"})," ",null==h||null==(r=h.director)?void 0:r.name]}),Object(G.jsxs)(d.a,{style:{color:"black"},children:[Object(G.jsx)(d.a,{style:{fontWeight:"800"},children:"Duraci\xf3n"})," ",null==h?void 0:h.duration," ","min"]}),Object(G.jsx)(d.a,{children:"Clasificaci\xf3n"}),Object(G.jsx)(u.a,{style:{backgroundColor:"black",borderRadius:4,paddingHorizontal:5,paddingVertical:2.5,display:"flex",maxWidth:40},children:Object(G.jsx)(d.a,{style:{color:"white",fontWeight:"700",fontSize:12,textAlign:"center"},children:null==h?void 0:h.classification})})]}),null!=h&&h.description?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(d.a,{style:{fontWeight:"700",color:"black",padding:10,fontSize:18},children:"Description"}),Object(G.jsx)(d.a,{style:{color:"black",paddingHorizontal:10},children:h.description})]}):null,null!=h&&h.trailerUrl?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(d.a,{style:{fontWeight:"700",color:"black",padding:10,fontSize:18},children:"Trailer"}),Object(G.jsx)(Z.a,{style:{flex:1,width:"100%",height:200},javaScriptEnabled:!0,source:{uri:h.trailerUrl}})]}):null]})]})};var K=n(92);var _=function(){return Object(G.jsxs)(u.a,{style:{flex:1,padding:20,backgroundColor:"white"},children:[Object(G.jsx)(j.a,{animated:!0,barStyle:"light-content"}),Object(G.jsx)(d.a,{style:{fontWeight:"600",opacity:.8,textAlign:"center",marginBottom:30,marginTop:10,fontSize:16},children:"App no oficial de la Cineteca del Estado de M\xe9xico"}),Object(G.jsxs)(g.a,{style:{borderWidth:1,borderRadius:10,borderColor:"#eee",backgroundColor:"#f6f6f6",display:"flex",justifyContent:"center",alignItems:"center",alignContent:"center",flexDirection:"row",padding:5},onPress:function(){return K.a.openURL("https://github.com/cesargdm/mexteca")},children:[Object(G.jsx)(d.a,{style:{fontWeight:"700",marginRight:5},children:"Github"}),Object(G.jsx)(v.b,{fill:"black",stroke:0})]}),Object(G.jsxs)(u.a,{style:{marginVertical:10},children:[Object(G.jsx)(d.a,{style:{fontWeight:"700",fontSize:18},children:"Aviso"}),Object(G.jsx)(d.a,{children:"No nos hacemos responsables por cambios en los horarios, funciones, disponibilidad o cualquier cambio de la informaci\xf3n aqu\xed presentada."})]}),Object(G.jsxs)(u.a,{style:{marginVertical:10},children:[Object(G.jsx)(d.a,{style:{fontWeight:"700",fontSize:18},children:"Cr\xe9ditos"}),Object(G.jsx)(d.a,{children:"Cineteca Mexiquense"}),Object(G.jsx)(d.a,{children:"The Movie Database"})]})]})};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}I.a({handleNotification:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{shouldShowAlert:!0,shouldPlaySound:!1,shouldSetBadge:!1});case 1:case"end":return e.stop()}}),null,null,null,Promise)}});var te=Object(C.a)(),ne=new Date;function re(){var e=Object(m.k)(),t=Object(m.m)(),n=z.c(),r=o()(n,1)[0];function a(){(function(){var e,t,n,r,a,i;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!F.a){o.next=21;break}return o.next=3,l.a.awrap(z.a());case 3:if(t=o.sent,n=t.status,r=n,"granted"===n){o.next=12;break}return o.next=9,l.a.awrap(z.b());case 9:a=o.sent,i=a.status,r=i;case 12:if("granted"===r){o.next=15;break}return alert("Failed to get push token for push notification!"),o.abrupt("return");case 15:return o.next=17,l.a.awrap(N.a());case 17:e=o.sent.data,console.log(e),o.next=22;break;case 21:return o.abrupt("return",alert("Must use physical device for Push Notifications"));case 22:return"android"===E.a.OS&&R.a("default",{name:"default",importance:J.a.MAX,vibrationPattern:[0,250,250,250],lightColor:"#FF231F7C"}),o.abrupt("return",e);case 24:case"end":return o.stop()}}),null,null,null,Promise)})().then((function(e){e&&V.from("notificationSettings").insert({token:e,all:!0}).then((function(e){e.data?alert("Te avisaremos cuando se publiquen una nuevas funciones"):alert("Hubo un problema al registrarte")}))}))}var i=Object(s.useState)(Object(k.a)(ne)),c=o()(i,2),j=c[0],h=c[1],y=Object(s.useState)({data:null,error:null,loading:!0}),C=o()(y,2),I=C[0],U=I.data,B=I.error,H=I.loading,q=C[1],L=Object(x.a)().width,Z=Math.min(L,800),X=Math.round(Z/200),Y=Z/X;Object(s.useEffect)((function(){function t(e,t){h(Object(k.a)(t))}var n=Object(D.a)(j,ne);e.setOptions({headerTitle:n,headerLeft:function(){return Object(G.jsx)(g.a,{onPress:function(){return e.navigate("AboutScreen")},children:Object(G.jsx)(v.c,{width:30,height:30})})},headerRight:function(){return Object(G.jsx)(u.a,{style:{width:100},children:Object(G.jsx)(P.a,{textColor:"black",themeVariant:"light",minimumDate:Object(W.a)(Object(M.a)(ne,1)),maximumDate:Object(T.a)(Object(A.a)(ne,1)),value:j,mode:"date",display:"compact",onChange:t})})}})}),[e,t,j]);var Q=Object(s.useCallback)((function(){var e,t,n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return q({error:null,data:null,loading:!0}),r.prev=1,r.next=4,l.a.awrap(V.from("presentations").select("\n          id,\n          date,\n          room,\n          movie (\n            id,\n            title,\n            posterUrl,\n            duration,\n            tmdbRating,\n            year,\n            classification\n          )\n        ").order("date",{ascending:!0}).gte("date",j.toISOString()).lte("date",Object(S.a)(j).toISOString()));case 4:if(e=r.sent,t=e.data,!(n=e.error)){r.next=10;break}throw console.log(n),new Error("Could not get presentations");case 10:q({data:t,loading:!1,error:n}),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(1),console.log(r.t0),q((function(e){return ee(ee({},e),{},{loading:!1,error:r.t0})}));case 17:case"end":return r.stop()}}),null,null,[[1,13]],Promise)}),[j]);return Object(s.useEffect)((function(){Q()}),[j]),U?0===U.length?Object(G.jsxs)(u.a,{style:[ie.container,{justifyContent:"center",alignItems:"center",padding:20}],children:[Object(G.jsx)(d.a,{style:{color:"black",textAlign:"center",fontSize:20,fontWeight:"700",opacity:.9},children:"No hemos encontrado funciones para este d\xeda, intenta revisar despu\xe9s"}),null!=r&&r.granted?null:Object(G.jsxs)(g.a,{onPress:function(){return a()},children:[Object(G.jsx)(d.a,{style:{marginTop:30,opacity:.6,fontWeight:"600"},children:"Si quieres tambi\xe9n podemos avisarte"}),Object(G.jsxs)(u.a,{style:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"center"},children:[Object(G.jsx)(v.a,{width:15,height:15,stroke:"black",fill:"black"}),Object(G.jsx)(d.a,{style:{alignItems:"center",fontWeight:"800",color:"black",marginLeft:5},children:"recibir notificaciones"})]})]})]}):Object(G.jsx)(u.a,{style:{flex:1},children:Object(G.jsx)(b.a,{refreshControl:Object(G.jsx)(f.a,{onRefresh:function(){return Q()},refreshing:!1}),numColumns:X,data:U,renderItem:function(t){var n,r=t.item;return Object(G.jsxs)(g.a,{onPress:function(){return e.navigate("MovieScreen",{id:r.movie.id,title:r.movie.title,posterUrl:r.movie.posterUrl})},style:{width:Y,padding:10,paddingBottom:20},children:[Object(G.jsx)(u.a,{style:{shadowColor:"#000",shadowOffset:{width:0,height:0},shadowOpacity:.2,shadowRadius:4},children:Object(G.jsx)(p.a,{style:{width:"100%",height:1.48*Y,borderRadius:5,borderWidth:1,borderColor:"#ddd",overflow:"hidden"},resizeMode:"cover",source:{uri:r.movie.posterUrl},children:Object(G.jsxs)(u.a,{style:{padding:5,display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(G.jsxs)(d.a,{style:{backgroundColor:"rgba(0,0,0,0.5)",fontWeight:"800",fontSize:10,borderRadius:4,overflow:"hidden",color:"white",padding:2,paddingHorizontal:5},children:["Sala ",r.room]}),Object(G.jsx)(d.a,{style:{fontWeight:"700",fontSize:12,color:"white"},children:Object(w.a)(r.date,"America/Mexico_City","h:mm aaa")})]})})}),Object(G.jsx)(d.a,{style:{marginTop:5,color:"black",width:"100%",fontWeight:"700",fontSize:18,textAlign:"center"},children:null!=(n=r.movie.title)?n:"No title"}),Object(G.jsxs)(d.a,{style:{color:"#666",textAlign:"center",fontSize:13,marginTop:2.5},children:[r.movie.year," \xb7 ",r.movie.duration," min \xb7"," ",r.movie.classification]}),Object(G.jsx)(u.a,{style:{marginTop:2.5,display:"flex",flexDirection:"row",justifyContent:"center",marginBottom:10},children:Object(G.jsx)(u.a,{style:{display:"flex",flexDirection:"row"},children:new Array(Math.round(r.movie.tmdbRating/2)).fill(null).map((function(e,t){return Object(G.jsx)(v.d,{width:12.5,height:12.5,stroke:"none",fill:"gold"},t)}))})})]})},columnWrapperStyle:{maxWidth:800,margin:0,marginHorizontal:"auto"},contentInsetAdjustmentBehavior:"automatic",style:ie.container},X)}):H?Object(G.jsxs)(u.a,{style:[ie.container,{justifyContent:"center",alignItems:"center"}],children:[Object(G.jsx)(O.a,{size:"large"}),Object(G.jsx)(d.a,{style:{color:"black",marginTop:4,fontWeight:"800"},children:"Obteniendo cartelera"})]}):Object(G.jsx)(u.a,{style:[ie.container,{justifyContent:"center",alignItems:"center"}],children:Object(G.jsxs)(d.a,{style:{color:"black",marginTop:4,fontWeight:"800"},children:["Error",JSON.stringify(B)]})})}function ae(){return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(j.a,{barStyle:"dark-content"}),Object(G.jsx)(U.a,{value:V,children:Object(G.jsx)(y.a,{children:Object(G.jsxs)(te.Navigator,{children:[Object(G.jsx)(te.Screen,{options:{headerTintColor:"black"},name:"HomeScreen",component:re}),Object(G.jsx)(te.Screen,{options:{headerTransparent:!0,headerTintColor:"white",title:"",headerBackTitle:"",headerBackTitleVisible:!1},name:"MovieScreen",component:Q}),Object(G.jsx)(te.Screen,{options:function(e){var t=e.navigation;return{title:"Mexteca",presentation:"modal",headerLeft:function(){return Object(G.jsx)(g.a,{onPress:function(){return t.goBack()},children:Object(G.jsx)(v.e,{color:"black",height:30,width:30})})}}},name:"AboutScreen",component:_})]})})})]})}var ie=h.a.create({container:{flex:1,backgroundColor:"#f3f3f3"}})},189:function(e,t,n){e.exports=n(250)}},[[189,1,2]]]);
//# sourceMappingURL=app.b78aaa28.chunk.js.map